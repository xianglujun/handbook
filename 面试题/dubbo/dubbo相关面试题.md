1. Dubbo有几种容错机制
容错机制指的是在系统控制在一定范围的一种允许或 包容犯错情况的发生。
在分布式架构下, 网络, 硬件, 应用都可以发生故障。由于各个服务之间可能存在依赖关系, 如果一条练舞中的某个节点出现故障, 将会导致雪崩效应。为了减少某一个节点故障的影响范围, 所以我们才需要去构建容错服务, 来优雅的处理这种中断响应。
- failsafe: 失败安全, 可以认为是把错误吞掉(记录日志)
- failover(默认)重试其他服务器; retries重试的次数, 默认为`2`次
- failback 失败后自动恢复
- forking forks: 设置并行数
- Broadcast: 广播, 任意一台报错, 则执行的方法报错, 通过cluster方法, 配置指定的容错方案。

2. dubbo的服务降级
`降级的目的是为了保证核心服务可用`
降级可以有几个层面的分类:
- 自动降级
- 人工降级

按照功能可以分为:
- 读服务降级
- 写服务降级

2.1 对一些非核心服务进行降级, 在大促之前通过降级开关关闭那些推荐内容, 评价等对主流程没有影响的功能

2.2 故障降级, 比如远程调用的服务挂了, 网络故障或者RPC服务返回异常, 那么可以直接降级, 降级的方案比如设置默认值, 采用兜底数据等等

2.3 限流降级, 在秒杀这种流量比较集中并且流量特别大的情况下, 因为突发访问量特别大可能导致系统支持不了。这个时候可以采用限流来限制访问. 当达到阈值时, 后续的请求被降级, 比如进入排队页面, 比如跳转到错误页面

3. dubbo的优先级配置
以timeout为例, 显示了配置的查找顺序, 其他retries,loadbalance等类似。

- 方法级优先, 接口次之, 全局配置再次之
- 如果级别一样, 则消费方优先, 提供方次之
- 其中, 服务提供方配置, 通过URL经由注册中心传递给消费方

`建议由服务器提供方设置超时, 因为一个方法需要执行多长时间, 服务提供方更清楚, 如果一个消费方同事引用多个服务, 就不需要关系每个服务超时设置。`

4. 什么情况下使用dubbo协议, 什么时候使用rmi协议
- dubbo协议是缺省协议, 采用单一长连接和NIO异步通讯, 适用于数据量小大并发的服务调用，以及消费者机器远大于服务提供者机器数的情况
- rmi协议瞎用阻塞式短连接和JDK标准序列化方式, 适用于: 传入传出参数数据包大小混合, 消费者与提供者个数差不多，可传文件。
