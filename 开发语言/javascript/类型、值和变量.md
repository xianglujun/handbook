# 类型、值和变量

## 类型

在Java中有两种数据类型，分别为`原始类型`和`对象类型`。 原始类型包括了`数字`、`字符串`、`布尔类型`



### 数字

在JS中所有的数字都采用浮点数表示，因为浮点数是有大小范围的。如果值超过了所能表示的范围, 则无法保证低位数字的精度。

在JS中有几种数字类型，具体包括整数、浮点数。



#### 整数

在JS中整数有两种表达方式:

- 十进制的表达方式，例如: `1`, `1000`, `20`
- 十六进制的表达方式。十六进制的表达方式是以`0X`开头的，然后跟上`0~9`和`a~f`表示`10-16`的数字. 例如: `0xff`表示255等
- `八进制`表达方式其实在JS中没有支持，八进制的表示方式是以`0`开始，其后跟上`0~7`的数字来表示, 例如: `0377`表示了数字255

> 八进制的表达方式在JS实现中可能表达了不同的含义, 因此不建议以这种方式表达一个数字。例如在ES6的严格模式下，八进制是明令禁止的。



#### 浮点数

浮点数可以表示带有小数的数字。在JS中浮点数采用实数的表示方法，包含了整数、小数点、浮点数三个部分。

同时，在JS中也能够使用`指数计数法`表示小数，即在实数后面跟上`e`或者`E`



```js
3.14159
.333333
6.02e23
1.2344E-100
```

#### 数字运算

在JS中，对数字的运算除了基础的加减乘除以外，同时JS也提供了其他的函数帮助进行复杂的运算，这些复杂的运算通过作为`Math`的属性和实现。

```js
Math.pow(2,3) // 8 表示2的3次幂
Math.round(.5) // 1 四舍五入
Math.cell(.5) // 1 向上取整
Math.floor(.5) // 1 向下取整
Math.abs(-5)	// 5 取绝对值
Math.max(x, y, z)	// 返回x, y ,z中的最大值
Math.min(x,y,z)		// 返回x, y, z中的最小值
Math.random()		// 生成一个大于等于0小于1的随机数
Math.PI				// 圆周率
Math.E				// e：自然对数的底数
Math.sqrt(4)		// 2, 表示4的平方根
Math.pow(27, 1/3)	// 3 表示27的立方根
Math.sin(0)			// 三角函数:
Math.cos(1)			// 三角函数
Math.log(10)		// 10的自然对数
Math.log(100)/Math.LN10	// 以10为底100的对数
Math.log(512)/Math.LN2	// 以2为底512的对数
Math.exp(3)			// e的3次幂
```

##### 溢出（overflow）

溢出是指在数字超过了JS所能表示最大数字的上限时， 就会产生数字的溢出，最终返回的值以`Infinity`表示，该值表示了一个无穷大的值。相反，如果数字超过了JS能表示的负数的范围，返回的结果为`-Infinity`表示负无穷大。



##### 下溢（underflow）

下溢是指运算结果值比JS所能表示的最小的数还小的时候，这时就会产生下溢. 这时JS将会返回一个0表示。相反，针对负数的情况，JS将返回一个`-0`来表示



##### 被零整除

在JS中，当除数为0的时候，并不会抛出异常，在JS中除数为0的时候，可能会得到两种不同的值.

- 当分子为正数时，此时返回的值为`Infinity`, 表示正无穷大
- 当分子为负数时，此时返回的值为`-Infinity`，表示负无穷大
- 当分子为0时，此时`0/0`是没有意义的，因此会返回`NaN`表示得到的事一个非数字

##### NaN

在JS中`NaN`是一个特殊的非数字值, 他和任何值都不相等, 包括他自己。我们在判断数值的时候，可以通过`x!=x`的方式来判断x的值是否为`NaN`



```js
Infinity 					// 将一个可读/可写的变量初始化为无穷大
Number.POSITIVE_INFINITY	// 同样的值，只读
1/0							// Infinity
Number.MAX_VALUE + 1		// Infinity
Number.NEGATIVE_INFINITY	// -Infinity
-Infinity
-1/0						// -Infinity
-Number.MAX_VALUE - 1		// -Infinity
NaN							// 表示一个非数字
Number.NaN					
0/0							// NaN
Number.MIN_VALUE - 1		// 0
-Number.MIN_VALUE - 1		// -0
-1/Infinity					// -0
-0

var x = 0/0
x == NaN					// false
```

## 日期和时间

JS语言核心包括`Date()`构造函数, 用来表示日期和时间。在JS中提供了对日期操作的一些计算函数：

```js
var then = new Date(2021, 0, 1) // 表示2021年1月1日
var later = new Date(2021, 0, 1, 18, 0, 0) // 表示了具体的日期和时间
var now = new Date()
var elapsed = now - then; // 日期减法, 计算时间间隔的毫秒数

later.getFullYear() // 2021
later.getMonth()	// 0, 从0开始计数的月份
later.getDate()		// 1: 从1开始计数的天数
later.getDay()		// 表示星期几, 0表示星期日 5表示星期一
later.getHours()	// 当地时间的小时
later.getUTCHours()	// 使用UTC表示小时的时间，基于时区
```



## 文本

### 字符串直接量

在JS程序中的字符串直接量，是由`单引号`或`双引号`括起来的字符序列。在单引号中的字符串可以包含双引号，有双引号表示的字符串中可以包含单引号。例如以下示例:

```js
""					// 空字符串
'testing'
"3.22"
'name="xlj"'
"Wouldn't you prefer O'Reilly's book?"
"This string\nhas two lines"
"π is the ratio of a cirycle's circumference to its diameter"
```

> 在不同的版本中， 多行的字符串有不同的要求:
>
> - 在ES3中，字符串必须写在一行中
> - 在ES5中，字符串直接量可以拆分成数行，每行必须以`\`结束, 其中`\n`和`\`都不算做为字符串的内容

```js
"two\nlines"
"one \
long \
lines"
```

### 转义字符

在JS中`\`的使用标识了一个转义符，在JS中有比较多的转义符的表示。如`\n`表示了换行等。

| 转义字符 | 含义                               |
| -------- | ---------------------------------- |
| `\o`     | NUL字符(\u0000)                    |
| `\b`     | 退格符(\u0008)                     |
| `\t`     | 水平制表符(\u0009)                 |
| `\n`     | 换行符(\u000A)                     |
| `\v`     | 垂直制表符(\u000B)                 |
| `\f`     | 换页符(\u000C)                     |
| `\r`     | 回车符(\u000D)                     |
| `\"`     | 双引号(\u0022)                     |
| `\'`     | 撇号或单引号(\u0027)               |
| `\\`     | 反斜线（\u005C）                   |
| `\xXX`   | 由两位十六进制XX指定的Latin-1字符  |
| `\uXXXX` | 由4位十六进制XXXX指定的Unicode字符 |

在字符串的对象中，其实也包含了比较多的操作方法，具体如下:

```js
var s = "hello, world"		// 定义一个字符串
s.charAt(0)					// h, 第一个字符
s.charAt(s.length - 1)		// d: 最后一个字符
s.substring(1, 4)			// ell: 第2~4个字符
s.slice(1,4)				// ell: 同上
s.slice(-3)					// rld: 最后3个字符
s.indexOf("l")				// 2： 字符l首次出现的位置
s.lastIndexOf("l")			// 10: 字符l最后一次出现的位置
s.indexOf("l", 3)			// 3： 在位置3及之后首次出现字符l的索引
s.split(", ")				// ["hello", "world"] 分割成子串
s.replace("h", "H")			// "Hello, world" 全文字符替换
s.toUpperCase()				// "HELLO, WORLD"
```

> JS中的字符串是固定不变的，因此当我们在对字符串进行操作的时候，都会生成新的字符串对象。



## 布尔值

布尔值指代真或假，开或关，是或否。这种类型只有两个值，就是`true`和`false`。

在JS中任何类型的值都可以被转换成为布尔值，在一下的六种情况中，布尔值会被转换为false.

```js
undefined
null
0
-0
NaN
""
```

除了以上的六个`假值`会被转换成为false之外，其他的值，包括了对象、数组的值都会被转换为true.

## 值

在JS中有两个特殊值，分别为`null`和`undefined`. 这两个值既不是数字，也不是字符串，也不是布尔类型。他们通常代表了各自类型的唯一成员。

- 当我们对null执行`typeof`预算的时候，返回的结果是`"object"`，也就是说，可以将null认为是一个特殊的对象值，含义是`非对象`
- undefined
  - 而undefined表示值的空缺。用未定义的值表示更深层次的空值。它是变量的一种取值，
  - 表明变量没有初始化。如果要查询对象属性或数组元素的值时返回undefined则说明这个属性或元素不存在。
  - 如果函数没有返回任何值，则返回undefined
  - 引用没有提供实参的函数形参的值也会的到undefined.
  - 如果我们对undefined执行`typeof`的操作，则会返回`undefined`字符串，表明这个值是这个类型的唯一成员。

## 全局对象

全局对象的属性是全局定义的符号，JS程序可以直接使用。当JS解释器启动时，它将创建一个新的全局对象，并给它一组定义的初始属性。

- 全局属性，例如: undefined, Infinity, NaN
- 全局函数，例如: isNaN(), parseInt(), eval()
- 构造函数, 例如: Date(), RegExp(), String(), Object(), Array()
- 全局对象, 例如：Math和JSON

> 全局对象的初始属性并不是保留字，但他们应该当做保留字来对待。

## 对象类型

- 对象类型是属性的集合，每个对象都是由`名/值对`构成。其中比较特殊的一个对象就是全局对象。
- 普通的JS对象是`命名值`的`无序集合`。
- 同时，JS也定义了一种特殊的对象——数组，表示带有编号值的`有序集合`
- `函数`是JS中的另外一种特殊的对象, 表示了与它相关联的可执行代码的对象。通过函数执行可执行代码，并返回执行结果
  - `构造函数`: 如果我们通过初始化的方式初始化函数，则被称为构造函数(即通过new的方式构建)
    - 每个构造函数定义了一类对象(class), 有构造函数初始化的对象的集合。同时, `类可以看做是对象类型的子类型`
    - 在JS中，初始定义了集中常用的类:
      - Array 表示数组
      - 函数(Function)
      - 日期(Date)
      - Regex 正则表达式
      - Error 定义了在JS运行过程中执行错误或者语法错误

> JS是可以自动进行数据类型转换的，例如：在期望使用字符串的地方使用了数字，会自动的将数字转换为字符串使用。