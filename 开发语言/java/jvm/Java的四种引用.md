# Java四种引用类型
- 强引用
- 软引用
- 弱引用
- 虚引用

## 提供四种引用类型的目的
- 通过代码的方式决定对象的声明周期
- 有利于JVM进行垃圾回收

## 引用的概念

1. 强引用

是指创建一个对象并把这个对象赋给引用变量

```java
StringBuffer stringBuffer = new StringBuffer("Helloword");
```
变量str指向StringBuffer实例所在的对空间, 通过str可以操作该对象.

### 强引用的特点

- 强引用可以直接访问目标对象
- 强引用所指向的对象在任何时候都不会被系统回收。JVM宁愿抛出OOM异常, 也会不回收强引用所指向的对象
- 强引用可能导致内存泄露

2. 软引用
软引用是除了强引用外, 最强的引用类型. 可以通过`java.lang.ref.SoftReference`使用软引用, 一个持有运用的对象, 不会被JVM很快回收,JVM会根据当前堆的使用情况来判断何时回收.当对使用率接近阈值时, 才会去回收软引用的对象。 因此，软引用可以用于实现对内存敏感的`高速缓存`.

`SoftReference`的特点是它的一个实例保存对一个Java对象的引用, 该软引用的存在不妨碍来及搜集线程对Java对象的回收。也就是说, 一旦`SoftReference`保存了一个对Java对象的软引用后, 在垃圾线程对这个Java对象回收前,`SoftReference`类所提供的get()方法放回Java对象的强引用。 一旦垃圾线程回收该Java对象之后, get()方法将返回null;

3. 弱引用

弱引用是一种比较引用较弱的引用类型. 在系统GC时, 只要发现弱引用, 不管系统对空间是否已足够, 都将对该对象进行回收。在java中, 可以用`java.lang.ref.WeakReference`实例来保存对一个Java对象的弱引用.
> 软引用和弱引用都非常适合来保存那些可有可无的缓存数据, 如果这么做, 当系统内存不足时, 那些缓存数据会被回收, 不会导致内存溢出. 而当内存资源充足时, 这些缓存数据又可以存在相当长的时间, 从而起到加速系统的作用.

4. 虚引用

虚引用是所有类型中最弱的一个。一个持有虚引用的对象, 和没有引用几乎是一样的，随时可能被垃圾回收器回收。当视图通过虚引用的get方法获得强引用时, 总是会失败. 并且，虚引用必须和引用对垒一起使用, 它的作用在于跟踪垃圾回收过程。

当垃圾回收期准备回收一个对象时, 如果发现它还有虚引用, 就汇在垃圾回收后, 销毁这个对象。将这个虚引用加入引用队列。程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要被垃圾回收. 如果程序发现某个虚引用被加入到引用队列, 那么就可以在引用的对象的内存被回收之前采取必要的行动。