## 功能

- ZooKeeper从文件系统中获得启发, 提供一组简单的API，使开发人员可是实现通用的协作任务，包括了`选举主节点`,`管理组内成员关系`, `管理元数据`等。
- 在分布式中协作多个任务
- 数据分片
- 故障恢复
- 服务发现

## 客户端

连接到ZooKeeper的所有连接, 都可以看成是连接到ZooKeeper服务器的客户端，通过提供给的API进行操作。客户端提供给的功能强大，主要包括了一下功能:

- 保障一致性，有序性和持久性
- 实现通用同步原语
- 在实际应用中，并发往往导致不正确的行为。Zookeeper为我们提供了以简单的并发处理机制

## 实现原理

ZooKeeper使用共享存储模型来实现应用间的协作和同步原语。

## 主从模式中需要解决的问题

- 主节点崩溃
  - 如果主节点崩溃, 那么将无法分配任务或者重新分配失败的任务
- 从节点崩溃
  - 从节点崩溃, 将导致已分配的任务无法完成
- 通信故障
  - 如果主节点和从节点无法进行信息交换, 将导致无法向从节点分配新的任务

为了解决以上问题，需要节点失效之后，重新选举一个新的主节点，并判断哪些从节点已经失效。并判定一个从节点相对于系统其他部分来说是否可用。

## 主从节点的需求

- 主节点选举
- 崩溃监测
- 组成员关系管理
  - 主节点必须知道哪些从节点具备了执行任务的能力
- 元数据管理
  - 主节点和从节点必须具有通过某种可靠的方式来保存分配状态和执行状态的能力
