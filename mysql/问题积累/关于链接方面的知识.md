# Mysql链接

## 自动关闭连接

mysql服务器会定期检查客户端连接，如果客户端太长时间没有执行操作，连接器就会自动断开，这个时间由参数`wait_timeout`控制，默认值为`8小时`



如果在链接呗断开之后，客户端再次发送请求时，就会手袋一个错误提醒: `Lost connection to MySQL server during query`. 这时候就需要重新链接，才能继续执行请求。

## 长连接

数据库里面，`长连接`是指链接成功后，如果客户端持续有请求，则一直使用同一个链接。

`短连接`则是指每次执行完很少的几次查询就断开链接，下次查询再重新建立一个。

建立链接的过程通常是比较复杂的，所以在使用中尽量减少建立链接的动作，也就是`尽量使用长连接`

如果全部使用长连接后，Mysql占用内存涨的特别快，这是因为MySQL在执行过程中临时使用的内存是管理在链接对象里面。这些资源会在`链接断开的时候才释放`。所以如果长连接累积下来，就可能导致`内存占用过大`, 被系统强行杀掉(`OOM`), 从现象看就是Mysql异常重启了。



