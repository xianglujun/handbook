# rocketmq集群模式
## 单master模式
只有一个master节点, 称不上是集群，一旦master节点宕机, 那么真个服务就不可用，适合个人学习

## 多master模式
多个master节点组成集群, 单个master节点宕机或者重启对应用没有影响
- 优点
  - 所有模式中性能最高
- 缺点
  - 单个master节点宕机期间, 未被消费的消息在节点恢复之前不可用, 消息的实时性受到影响

> 注意: 使用同步刷盘可以保证消息不丢失, 同时topic相对应的queue应该分布在集群中哥哥节点，而不是只在单个节点上，否则，该节点宕机会对订阅topic的应用造成影响

## 多master多slave异步复制模式
在多master模式的基础上，每个master节点都有至少一个对应的slave. master节点可读可写，但是slave只能读不能写，类似于mysql主备模式。
- 优点
  - 在master宕机时, 消费者可以从slave节点读取消息，消息实时性不会受影响，性能机会和多master一样
- 缺点
  - 使用异步复制的同步方式有可能会有消息丢失的问题

## 多master多slave同步双写模式
同多master多slave异步复制类似，区别在于master和slave之间的数据同步方式

- 优点
  - 同步双写的同步模式保证数据不丢失
- 缺点
  - 发送单个消息RT会略长，性能相比异步赋值低10%

## 刷盘策略
### 同步刷盘
指的是节点自身数据是同步方法存储

### 异步刷盘
指的是节点自身数据是异步方式存储

## 同步方式
### 同步双写
指的是一组master和slave之间数据的同步方式进行复制

### 异步复制
指的是一组master和slave之间数据的同步方式进行异步复制
