# Spring数据转换

## 使用场景

| 场景               | 基于JavaBeans接口的类型转换实现 | Spring3.0+通用类型转换实现 |
| ------------------ | ------------------------------- | -------------------------- |
| 数据绑定           | YES                             | YES                        |
| BeanWrapper        | YES                             | YES                        |
| Bean属性类型转换   | YES                             | YES                        |
| 外部化属性类型转换 | NO                              | YES                        |

## 基于JavaBeans接口的类型转换

- 核心职责
  - 将String类型的内容转换为目标类型的对象
- 扩展原理
  - Spring框架将文本内容传递到PropertyEditor实现的`setAsText(String)`方法
  - `PropertyEditor#setAsText(String)`方法实现将String类型转换为目标类型的对象
  - 将目标类型的对象传入`PropertyEditor#setValue(Object)`方法
  - `PropertyEditor#setValue(Object)`方法实现需要临时存储传入对象
  - Spring框架将通过`PropertyEditor#getValue()`获取类型转换后的对象

## Spring内建扩展

- 内建扩展(org.springframework.beans.propertyeditors)

  

  | 转换场景           | 实现类                    |
  | ------------------ | ------------------------- |
  | String -> Byte数组 | `ByteArrayPropertyEditor` |
  | String -> Char     | `CharacterEditor`         |
  | String -> Char[]   | `CharArrayPropertyEditor` |
  | String -> Charset  | `CharsetEditor`           |
  | String -> Class    | `ClassEditor`             |
  | String -> Currency | `CurrencyEditor`          |