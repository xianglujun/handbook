# mybatis 缓存

## 系统缓存
### 一级缓存
1. 在没有特殊配置的情况下, 只开启`一级缓存`
2. `一级缓存`只是相对于同一个`SqlSession`而言, 不同的`SqlSession`不生效
3. `一级缓存`是`SqlSession`级别的隔离, 不同的session不能相互访问

### 二级缓存
1. `二级缓存`默认在mybatis中是不开启的，需要手工配置
2. `二级缓存`要求所有的缓存对象都可以被序列化, 即实现`Serializable`接口

#### 配置方式
在mybatisConfig.xml中，加入以下配置项：
```xml
<cache />
```

在这样的配置中, 很多参数都使用的默认配置:
- 映射语句中所有select都将被缓存
- 映射语句文件所有的insert,delete,update都将刷新缓存
- 缓存会使用LRU(Least Recently Used)策略对缓存进行回收
- 根据时间表, 比如No Flush Interval, 缓存不会以任何时间顺序来刷新
- 缓存会存储列表集合或者对象1024个引用
- 缓存会被视为read/write的缓存,意味着对象检索不是共享的,而且可以安全地被调用者使用,不干扰其他调用者或线程所做的潜在修改。

#### 参数说明
`<cache />`属性说明
- eviction 缓存的回收策略
  - LRU: 最近很少使用,移除最长时间不使用的对象(默认使用)
  - FIFO: 先进先出, 按照
  - SOFT: 软引用，移除基于垃圾回收器状态和软引用规则的对象
  - WEAK: 弱引用, 更积极地移除基于垃圾回收器状态和软引用规则的对象
- flushInterval: 舒心间隔时间,单位为毫秒。如果该属性不设置, 只有当SQL被执行的时候才会刷新缓存
- size: 引用数目，即能够存储多少个对象，不宜设置过大
- readOnly: 只读，只意味着缓存数据只能够被读取，不能被修改。这样设置的好处是我们可以快速的读取缓存。缺点是我们没有办法修改缓存。


## 自定义缓存
