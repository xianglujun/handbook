# 可观察性

## 指标(Metrics)

- 以聚合的方式监控和理解系统行为
- Istio中指标有以下分类:
  - 代理级别的指标(Proxy-level)
  - 服务级别的指标(Service-level)
  - 控制平面指标(Control plane)

### 代理级别的指标

- 搜集目标： Sidecard代理
-  资源粒度上的网格监控
- 容许指定搜集的代理(针对性的调试)

### 服务级别的指标

- 用于监控服务通信
- 四个基本的服务监控需求：延迟、流量、错误、饱和
- 默认指标到处到Prometheus (可自定义和更改)
- 可根据需求开关或关闭

### 控制平面指标

- 对自身组件行为的监控
- 用于了解网格的健康情况

## 访问日志(Acess logs)

- 通过应用产生的事件来了解系统
- 包括了完整的元数据信息(目标、源)
- 生成位置可选(本地、远端、如filebeat)
- 日志内容
  - 应用日志
  - Envoy日志 (kubectl logs -l app=demo -c istio-proxy)

## 分布式追踪

- 通过追踪骑牛，了解服务的调用关系
- 常用于调用链的问题排查，性能分析等
- 支持多种追踪系统